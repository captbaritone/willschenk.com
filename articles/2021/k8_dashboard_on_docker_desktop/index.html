<!doctype html><html><head><title>K8 Dashboard on Docker Desktop</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="K8 Dashboard on Docker Desktop"><meta property="og:description" content="Pretty easy to setup, but here are the steps. Docker Desktop   To easily get going on a local Mac, you can install the compoents using homebrew. brew install --cask docker brew install kubernetes-cli brew install kn   Start up Docker, and then turn on kubernetes and make sure that you have a running node. kubectl get nodes  NAME STATUS ROLES AGE VERSION docker-desktop Ready control-plane,master 5h59m v1."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2021/k8_dashboard_on_docker_desktop/"><meta property="article:published_time" content="2021-11-28T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="K8 Dashboard on Docker Desktop"><meta name=twitter:description content="Pretty easy to setup, but here are the steps. Docker Desktop   To easily get going on a local Mac, you can install the compoents using homebrew. brew install --cask docker brew install kubernetes-cli brew install kn   Start up Docker, and then turn on kubernetes and make sure that you have a running node. kubectl get nodes  NAME STATUS ROLES AGE VERSION docker-desktop Ready control-plane,master 5h59m v1."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>K8 Dashboard on Docker Desktop</h1><h2 class="font-weight-light font-italic mb-3">what&rsquo;s going on</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2021/k8_dashboard_on_docker_desktop/>Published November 28, 2021</a>
<a class=text-muted href=../../../tags/kubernetes>#kubernetes,</a>
<a class=text-muted href=../../../tags/docker>#docker</a></p><article class="article mt-5"><p>Pretty easy to setup, but here are the steps.</p><h2 id=headline-1>Docker Desktop</h2><p>To easily get going on a local Mac, you can install the compoents
using homebrew.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  brew install --cask docker
  brew install kubernetes-cli
  brew install kn</code></pre></div></div><p>Start up Docker, and then turn on kubernetes and make sure that you
have a running node.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  kubectl get nodes</code></pre></div></div><pre class=example>
NAME             STATUS   ROLES                  AGE     VERSION
docker-desktop   Ready    control-plane,master   5h59m   v1.21.5
</pre><h2 id=headline-2>Install kubenetes dashboard</h2><p>It's nice to have a local dashboard to see whats' going on.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.4.0/aio/deploy/recommended.yaml</code></pre></div></div><p>Then create a service account <code class=verbatim>account.yaml</code>:</p><div class="src src-yaml"><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=w>  </span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w>  </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ServiceAccount<span class=w>
</span><span class=w>  </span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>admin-user<span class=w>
</span><span class=w>    </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>kubernetes-dashboard<span class=w>
</span><span class=w>  </span>--<span class=sd>-
</span><span class=sd>  apiVersion: rbac.authorization.k8s.io/v1</span><span class=w>
</span><span class=w>  </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ClusterRoleBinding<span class=w>
</span><span class=w>  </span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>admin-user<span class=w>
</span><span class=w>  </span><span class=k>roleRef</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>apiGroup</span><span class=p>:</span><span class=w> </span>rbac.authorization.k8s.io<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ClusterRole<span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>cluster-admin<span class=w>
</span><span class=w>  </span><span class=k>subjects</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>kind</span><span class=p>:</span><span class=w> </span>ServiceAccount<span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>admin-user<span class=w>
</span><span class=w>    </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>kubernetes-dashboard</code></pre></div></div><p>Apply it:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  kubectl apply -f account.yaml</code></pre></div></div><p>Then you can get the token into your clipboard:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  kubectl -n kubernetes-dashboard get secret <span class=se>\
</span><span class=se></span>          <span class=k>$(</span>kubectl -n kubernetes-dashboard get sa/admin-user -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&#34;{.secrets[0].name}&#34;</span><span class=k>)</span> <span class=se>\
</span><span class=se></span>          -o go-template<span class=o>=</span><span class=s2>&#34;{{.data.token | base64decode}}&#34;</span> <span class=p>|</span> <span class=se>\
</span><span class=se></span>    pbcopy</code></pre></div></div><p>Finally, setup a proxy to access the dashboard:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>kubectl proxy <span class=p>&amp;</span></code></pre></div></div><p>And point your browser to <a href=http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/>http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</a></p></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2021/setting_up_knative/>Setting up knative</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2021/getting_emacs_working_on_osx_monterey/>Getting emacs working on OSX Monterey</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/rails_on_kubernetes_with_tls/>Rails on Kubernetes with TLS</a></p><p class="lead font-italic mb-0">certmanager</p><div class="font-weight-light mt-3"><p>I wanted to see how to really use kubernetes like I'm used to using heroku, so lets recreate everything using terraform, digital ocean, kubernetes and MAGIC! Sample rails app Build image First thing we'll do is to create a docker image that we'll use to build our rails app. Dockerfile.build: FROMruby:3.0.1WORKDIR/app# nodejs and yarn and clocRUN curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -RUN echo "deb https://dl.</p></div><a href=../../../articles/2021/rails_on_kubernetes_with_tls/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/deploying_open_faa_s_on_digital_ocean_with_terraform/>Deploying OpenFaaS on Digital Ocean with Terraform</a></p><p class="lead font-italic mb-0">Everything functional</p><div class="font-weight-light mt-3"><p>We are going to look at how to use Terraform to deploy a Kubernetes cluster on Digital Ocean, add a managed postgres database, and redis and OpenFaaS in kubernetes. This will show how to use Terraform to manage the configuration and how we can access both cloud and kubernetes managed services from OpenFaaS functions. We are going to use the digitalocean, kubernetes, and helm terraform providers. The plan Provision a digitalocean_kubernetes_cluster Provision a digitalocean_database_cluster Provision 2 kubernetes_namespace for openfaas and openfaas-fn Provision a helm_release for openfaas Provision a helm_release for redis Provision 2 kubernetes_secret to point to the databases Deploy an OpenFaaS function that reads those secrets and talks to the database.</p></div><a href=../../../articles/2021/deploying_open_faa_s_on_digital_ocean_with_terraform/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/controlling_docker_in_golang/>Controlling docker in golang</a></p><p class="lead font-italic mb-0">So meta</p><div class="font-weight-light mt-3"><p>I've been thinking about running different ephemeral jobs with attached volumes, volumes that I could garbage collect as needed. This is a non-standard way of using docker, but I wanted to look to see how I could interact with the docker daemon programatically. The use case is: Create a docker volume for a container Start up a docker container, with a specified environment Monitor the running of the container, kill if its running for too long Capture the output of the container Clean up the container Pull data from the volume Clean up the volume Setting up go environemnt First we need to setup a go project and create the go.</p></div><a href=../../../articles/2021/controlling_docker_in_golang/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>