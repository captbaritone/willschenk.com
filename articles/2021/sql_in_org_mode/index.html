<!doctype html><html><head><title>SQL in Org-Mode</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="SQL in Org-Mode"><meta property="og:description" content="I do a lot of sql, and I do a lot of org-mode. Lets put them together. Native SQLite   In org-babel-load-languages turn on sqlite. (You can use customize for this if you don't have another method in use.)  Then you have a source block that looks like _#+begin_src sqlite :db test.db :colnames yes create table if not exists greeting(one varchar(10), two varchar(10)); insert into greeting values( 'Hello', 'world!"><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2021/sql_in_org_mode/"><meta property="article:published_time" content="2021-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-17T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SQL in Org-Mode"><meta name=twitter:description content="I do a lot of sql, and I do a lot of org-mode. Lets put them together. Native SQLite   In org-babel-load-languages turn on sqlite. (You can use customize for this if you don't have another method in use.)  Then you have a source block that looks like _#+begin_src sqlite :db test.db :colnames yes create table if not exists greeting(one varchar(10), two varchar(10)); insert into greeting values( 'Hello', 'world!"><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>SQL in Org-Mode</h1><h2 class="font-weight-light font-italic mb-3">Everything in org-mode</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2021/sql_in_org_mode/>Published April 17, 2021</a>
<a class=text-muted href=../../../tags/emacs>#emacs,</a>
<a class=text-muted href=../../../tags/sql>#sql,</a>
<a class=text-muted href=../../../tags/org-mode>#org-mode</a></p><article class="article mt-5"><p>I do a lot of sql, and I do a lot of org-mode. Lets put them
together.</p><h2 id=headline-1>Native SQLite</h2><p>In <code class=verbatim>org-babel-load-languages</code> turn on <code class=verbatim>sqlite</code>. (You can use <code class=verbatim>customize</code>
for this if you don't have another method in use.)</p><p>Then you have a source block that looks like</p><div class="src src-org"><div class=highlight><pre class=chroma><code class=language-org data-lang=org>  _#+begin<span class=gl>_src sqlite :db test.db :colnames yes
</span><span class=gl>  create table if not exists  greeting(one varchar(10), two varchar(10));
</span><span class=gl>  insert into greeting values( &#39;Hello&#39;, &#39;world!&#39;);
</span><span class=gl>  select * from greeting;
</span><span class=gl>  _</span>#+end_src</code></pre></div></div><p><em>(Remove the <code class=verbatim>_</code> if you are copy and pasting.)</em></p><p>And that will print out</p><div class="src src-sqlite d-none"><pre><code class=language-sqlite data-lang=sqlite>  create table if not exists  greeting(one varchar(10), two varchar(10));
  insert into greeting values( &#39;Hello&#39;, &#39;world!&#39;);
  select * from greeting;</code></pre></div><table><thead><tr><th>one</th><th>two</th></tr></thead><tbody><tr><td>Hello</td><td>world!</td></tr></tbody></table><p>You can also set the <code class=verbatim>:db</code> property globally in your org file with:</p><div class="src src-org"><div class=highlight><pre class=chroma><code class=language-org data-lang=org><span class=cs>#+PROPERTY</span><span class=c>: header-args :db test-sqlite.db</span></code></pre></div></div><p>And then reload the file.</p><h2 id=headline-2><code class=verbatim>org-sql-mode</code></h2><p>Install <code class=verbatim>ob-sql-mode</code> using the normal methods. This will use <code class=verbatim>sql-mode</code>
to run queries, which lets you use other databases than sqlite3.</p><div class="src src-elisp"><div class=highlight><pre class=chroma><code class=language-elisp data-lang=elisp>  <span class=p>(</span><span class=nb>use-package</span> <span class=nv>ob-sql-mode</span>
    <span class=nb>:ensure</span> <span class=no>t</span><span class=p>)</span></code></pre></div></div><p>In <code class=verbatim>org-babel-load-languages</code> turn on <code class=verbatim>sql</code>.</p><p>And then you can run queries like so:</p><div class="src src-org"><div class=highlight><pre class=chroma><code class=language-org data-lang=org>  _#+begin<span class=gl>_src sql-mode :product postgres
</span><span class=gl>    select * from commits;
</span><span class=gl>  _</span>#+end_src</code></pre></div></div><p>There's more to it but that gives you the rough idea!</p><h2 id=headline-3>References</h2><ol><li><p><a href=https://www.reddit.com/r/emacs/comments/bb5mnv/sql_workflows_inside_emacs_anyone_have_a_nice/>https://www.reddit.com/r/emacs/comments/bb5mnv/sql_workflows_inside_emacs_anyone_have_a_nice/</a></p></li><li><p><a href=https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-sqlite.html>https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-sqlite.html</a></p></li><li><p><a href=https://github.com/nikclayton/ob-sql-mode>https://github.com/nikclayton/ob-sql-mode</a></p></li><li><p><a href=https://orgmode.org/manual/Using-Header-Arguments.html#Using-header-arguments>https://orgmode.org/manual/Using-Header-Arguments.html#Using-header-arguments</a></p></li></ol></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2021/controlling_docker_in_golang/>Controlling docker in golang</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2021/bootstrapping_react_with_tailwind_css/>Bootstrapping React with Tailwind</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/setting_up_emacs_for_typescript_development/>Setting up emacs for typescript development</a></p><p class="lead font-italic mb-0">If we are going to bother with static types, might as well use them</p><div class="font-weight-light mt-3"><p>I've been playing with deno and typescript, so I thought I'd document how to setup a basic tide environment with emacs. Prerecs Things will go better if you have nativejson support in your emacs build. I build from scratch which is super easy, but to check what you have you can run the following elisp: (if (functionp 'json-serialize) (message "Native JSON is available") (message "Native JSON is *not* available")) Native JSON is available You also will need Node > 0.</p></div><a href=../../../articles/2021/setting_up_emacs_for_typescript_development/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/emacs_blogging_mode/>Emacs Blog Writing and Navigation Mode</a></p><p class="lead font-italic mb-0">emacs and hugo sitting in a tree</p><div class="font-weight-light mt-3"><p>This blog is basically my labnotes where I explore different parts of technology. Almost all of my coding related activity starts off in this repo, while I explore different things to see how they work. I have a lot of things in drafts, and I wanted to learn how to build a simple emacs interface to let me navigate around my file system. I couldn't find any good documentation on how to do anything with tabulated-list-mode so I spend the evening poking around and seeing how it works.</p></div><a href=../../../articles/2021/emacs_blogging_mode/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/installing_emacs_on_buster/>Installing emacs on buster</a></p><p class="lead font-italic mb-0">so many ways to get software</p><div class="font-weight-light mt-3"><p>I've already written about installing emacs-snapshot on debian buster, here are two additional ways. The first is to use flatpak, and the other is to build from source. Flatpack sudo apt-get install flatpak sudo apt install gnome-software-plugin-flatpak sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo Then: sudo flatpak install flathub org.gnu.emacs And running it: flatpak run org.gnu.emacs You can then pin it in your dock and you are good to go.</p></div><a href=../../../articles/2021/installing_emacs_on_buster/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>