<!doctype html><html><head><title>Logging with an HTTP Proxy</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Logging with an HTTP Proxy"><meta property="og:description" content="I miss having Chrome dev tools when writing node applications, since I often want to see what exactly the network traffic. Here's a way to easily setup a man in the middle proxy to look at all the traffic your application is generating. Run the docker instance   First we first up the proxy with the web interface: docker run --rm -it -p 8080:8080 -p 8081:8081 mitmproxy/mitmproxy mitmweb --web-host 0."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2021/logging_with_an_http_proxy/"><meta property="article:published_time" content="2021-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Logging with an HTTP Proxy"><meta name=twitter:description content="I miss having Chrome dev tools when writing node applications, since I often want to see what exactly the network traffic. Here's a way to easily setup a man in the middle proxy to look at all the traffic your application is generating. Run the docker instance   First we first up the proxy with the web interface: docker run --rm -it -p 8080:8080 -p 8081:8081 mitmproxy/mitmproxy mitmweb --web-host 0."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>Logging with an HTTP Proxy</h1><h2 class="font-weight-light font-italic mb-3">Simple MITM debugging</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2021/logging_with_an_http_proxy/>Published January 22, 2021</a>
<a class=text-muted href=../../../tags/javascript>#javascript,</a>
<a class=text-muted href=../../../tags/logging>#logging,</a>
<a class=text-muted href=../../../tags/proxy>#proxy,</a>
<a class=text-muted href=../../../tags/debugging>#debugging</a></p><article class="article mt-5"><p>I miss having Chrome dev tools when writing node applications, since I
often want to see what exactly the network traffic. Here's a way to
easily setup a man in the middle proxy to look at all the traffic your
application is generating.</p><h2 id=headline-1>Run the docker instance</h2><p>First we first up the proxy with the web interface:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  docker run --rm -it -p 8080:8080 -p 8081:8081 mitmproxy/mitmproxy mitmweb --web-host 0.0.0.0</code></pre></div></div><h2 id=headline-2>Node ENV Variables</h2><p>Then we set the proxy environment variable, and for node specifically,
tell it to not worry about self-signed certificates:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  <span class=nb>export</span> <span class=nv>HTTP_PROXY</span><span class=o>=</span>http://localhost:8080
  <span class=nb>export</span> <span class=nv>NODE_TLS_REJECT_UNAUTHORIZED</span><span class=o>=</span><span class=s1>&#39;0&#39;</span></code></pre></div></div><p>Then we run our script:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  node outdated.js</code></pre></div></div><p>Then go visit <a href=http://localhost:8081>http://localhost:8081</a> to see all of the requests that were made.</p><p>Simple and easy.</p></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2021/installing_faasd/>Installing faasd</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2020/rails_uuid_primary_keys/>rails uuid primary key</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/simple_cors_workaround_for_local_development/>Simple CORS workaround for local development</a></p><div class="font-weight-light mt-3"><p>I've been doing a lot of web development old school, just editing HTML and JavaScript by hand without a build environment. Running npx live-server is an easy one liner to spin up a server, that opens a browser for you and also updates changes on safe. Sometimes that's not enough. Often you want to pull in data from an API, and that requires HTTPS, and also you need to work around CORS limitations.</p></div><a href=../../../articles/2020/simple_cors_workaround_for_local_development/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/beginning_emacs/>Beginning Emacs</a></p><p class="lead font-italic mb-0">Rediscovering emacs</p><div class="font-weight-light mt-3"><p>Intro I've been dipping back ito the world of free software, and have been having a huge amount of fun getting back into emacs. I'm using it more of an operating system than I ever did before, as a way to navigate the world using a text interface. I'd never thought I'd be done with the terminal, but this is the first time that I've got something better and more powerful.</p></div><a href=../../../articles/2020/beginning_emacs/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>