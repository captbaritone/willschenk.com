<!doctype html><html><head><title>Setting up emacs for typescript development</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Setting up emacs for typescript development"><meta property="og:description" content="I've been playing with deno and typescript, so I thought I'd document how to setup a basic tide environment with emacs. Prerecs   Things will go better if you have nativejson support in your emacs build. I build from scratch which is super easy, but to check what you have you can run the following elisp: (if (functionp 'json-serialize) (message &#34;Native JSON is available&#34;) (message &#34;Native JSON is *not* available&#34;))  Native JSON is available   You also will need Node > 0."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2021/setting_up_emacs_for_typescript_development/"><meta property="article:published_time" content="2021-04-13T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-13T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up emacs for typescript development"><meta name=twitter:description content="I've been playing with deno and typescript, so I thought I'd document how to setup a basic tide environment with emacs. Prerecs   Things will go better if you have nativejson support in your emacs build. I build from scratch which is super easy, but to check what you have you can run the following elisp: (if (functionp 'json-serialize) (message &#34;Native JSON is available&#34;) (message &#34;Native JSON is *not* available&#34;))  Native JSON is available   You also will need Node > 0."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>Setting up emacs for typescript development</h1><h2 class="font-weight-light font-italic mb-3">If we are going to bother with static types, might as well use them</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2021/setting_up_emacs_for_typescript_development/>Published April 13, 2021</a>
<a class=text-muted href=../../../tags/emacs>#emacs,</a>
<a class=text-muted href=../../../tags/typescript>#typescript,</a>
<a class=text-muted href=../../../tags/tide>#tide</a></p><article class="article mt-5"><p>I've been playing with deno and typescript, so I thought I'd document
how to setup a basic tide environment with emacs.</p><h2 id=headline-1>Prerecs</h2><p>Things will go better if you have <code class=verbatim>nativejson</code> support in your emacs
build. I build from scratch which is super easy, but to check what
you have you can run the following elisp:</p><div class="src src-elisp"><div class=highlight><pre class=chroma><code class=language-elisp data-lang=elisp>    <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>functionp</span> <span class=ss>&#39;json-serialize</span><span class=p>)</span>
        <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;Native JSON is available&#34;</span><span class=p>)</span>
        <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;Native JSON is *not* available&#34;</span><span class=p>))</span></code></pre></div></div><pre class=example>
Native JSON is available
</pre><p>You also will need Node > 0.12.0, which you can test with:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>node -v</code></pre></div></div><pre class=example>
v15.12.0
</pre><h2 id=headline-2>Installing tide</h2><p>Throw this in your <code class=verbatim>emacs.el</code>:</p><div class="src src-elisp"><div class=highlight><pre class=chroma><code class=language-elisp data-lang=elisp>  <span class=p>(</span><span class=nb>use-package</span> <span class=nv>tide</span> <span class=nb>:ensure</span> <span class=no>t</span><span class=p>)</span>
  <span class=p>(</span><span class=nb>use-package</span> <span class=nv>company</span> <span class=nb>:ensure</span> <span class=no>t</span><span class=p>)</span>
  <span class=p>(</span><span class=nb>use-package</span> <span class=nv>flycheck</span> <span class=nb>:ensure</span> <span class=no>t</span><span class=p>)</span>

  <span class=p>(</span><span class=nb>defun</span> <span class=nv>setup-tide-mode</span> <span class=p>()</span>
    <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
    <span class=p>(</span><span class=nv>tide-setup</span><span class=p>)</span>
    <span class=p>(</span><span class=nv>flycheck-mode</span> <span class=mi>+1</span><span class=p>)</span>
    <span class=p>(</span><span class=nb>setq</span> <span class=nv>flycheck-check-syntax-automatically</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>save</span> <span class=nv>mode-enabled</span><span class=p>))</span>
    <span class=p>(</span><span class=nv>eldoc-mode</span> <span class=mi>+1</span><span class=p>)</span>
    <span class=p>(</span><span class=nv>tide-hl-identifier-mode</span> <span class=mi>+1</span><span class=p>)</span>
    <span class=c1>;; company is an optional dependency. You have to</span>
    <span class=c1>;; install it separately via package-install</span>
    <span class=c1>;; `M-x package-install [ret] company`</span>
    <span class=p>(</span><span class=nv>company-mode</span> <span class=mi>+1</span><span class=p>))</span>

  <span class=c1>;; aligns annotation to the right hand side</span>
  <span class=p>(</span><span class=nb>setq</span> <span class=nv>company-tooltip-align-annotations</span> <span class=no>t</span><span class=p>)</span>

  <span class=c1>;; formats the buffer before saving</span>
  <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;before-save-hook</span> <span class=ss>&#39;tide-format-before-save</span><span class=p>)</span>

  <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;typescript-mode-hook</span> <span class=nf>#&#39;</span><span class=nv>setup-tide-mode</span><span class=p>)</span></code></pre></div></div><p>And also tell it about <code class=verbatim>tsx</code> files:</p><div class="src src-elisp"><div class=highlight><pre class=chroma><code class=language-elisp data-lang=elisp>  <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;web-mode</span><span class=p>)</span>

  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;auto-mode-alist</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\.tsx\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>web-mode</span><span class=p>))</span>
  <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;web-mode-hook</span>
            <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
              <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>string-equal</span> <span class=s>&#34;tsx&#34;</span> <span class=p>(</span><span class=nv>file-name-extension</span> <span class=nf>buffer-file-name</span><span class=p>))</span>
                <span class=p>(</span><span class=nv>setup-tide-mode</span><span class=p>))))</span>

  <span class=c1>;; enable typescript - tslint checker</span>
  <span class=p>(</span><span class=nv>flycheck-add-mode</span> <span class=ss>&#39;typescript-tslint</span> <span class=ss>&#39;web-mode</span><span class=p>)</span></code></pre></div></div><h2 id=headline-3>Creating a sample project</h2><p>Lets create a sample project</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>  <span class=nb>cd</span> <span class=k>$(</span>mktemp -d<span class=k>)</span>
  npm init -y
  npm install --save-dev typescript-deno-plugin typescript</code></pre></div></div><p>And then create a <code class=verbatim>tsconfig.json</code> file which tells typescript about <code class=verbatim>deno</code>:</p><div class="src src-json"><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&#34;plugins&#34;</span><span class=p>:</span> <span class=p>[</span>
            <span class=p>{</span>
                <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;typescript-deno-plugin&#34;</span><span class=p>,</span>
                <span class=nt>&#34;enable&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span> <span class=err>//</span> <span class=err>default</span> <span class=err>is</span> <span class=err>`true`</span>
                <span class=nt>&#34;importmap&#34;</span><span class=p>:</span> <span class=s2>&#34;import_map.json&#34;</span>
            <span class=p>}</span>
        <span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span></code></pre></div></div><p>Lets create a file: <code class=verbatim>test.tsx</code></p><div class="src src-tsx"><div class=highlight><pre class=chroma><code class=language-tsx data-lang=tsx><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Welcome to deno!&#34;</span><span class=p>)</span>

<span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=nx>Deno</span><span class=p>.</span><span class=nx>args</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
<span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>);</span>

<span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Uint8Array</span><span class=p>(</span><span class=nx>await</span> <span class=nx>res</span><span class=p>.</span><span class=nx>arrayBuffer</span><span class=p>());</span>
<span class=nx>await</span> <span class=nx>Deno</span><span class=p>.</span><span class=nx>stdout</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>body</span><span class=p>);</span>
</code></pre></div></div><p>And put your cursor over <code class=verbatim>Deno.stdout</code> and press <code class=verbatim>M-.</code> to navigate to the
definition.</p><h2 id=headline-4>References</h2><ol><li><p><a href=https://github.com/ananthakumaran/tide>https://github.com/ananthakumaran/tide</a></p></li><li><p><a href=https://deno.land/manual@v1.8.0/getting_started/setup_your_environment#emacs>https://deno.land/manual@v1.8.0/getting_started/setup_your_environment#emacs</a></p></li></ol></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2021/sq_lite_in_the_browser/>SQLite in the browser</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2021/cloc_viz/>CLOCViz</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/emacs_blogging_mode/>Emacs Blog Writing and Navigation Mode</a></p><p class="lead font-italic mb-0">emacs and hugo sitting in a tree</p><div class="font-weight-light mt-3"><p>This blog is basically my labnotes where I explore different parts of technology. Almost all of my coding related activity starts off in this repo, while I explore different things to see how they work. I have a lot of things in drafts, and I wanted to learn how to build a simple emacs interface to let me navigate around my file system. I couldn't find any good documentation on how to do anything with tabulated-list-mode so I spend the evening poking around and seeing how it works.</p></div><a href=../../../articles/2021/emacs_blogging_mode/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2021/installing_emacs_on_buster/>Installing emacs on buster</a></p><p class="lead font-italic mb-0">so many ways to get software</p><div class="font-weight-light mt-3"><p>I've already written about installing emacs-snapshot on debian buster, here are two additional ways. The first is to use flatpak, and the other is to build from source. Flatpack sudo apt-get install flatpak sudo apt install gnome-software-plugin-flatpak sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo Then: sudo flatpak install flathub org.gnu.emacs And running it: flatpak run org.gnu.emacs You can then pin it in your dock and you are good to go.</p></div><a href=../../../articles/2021/installing_emacs_on_buster/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/getting_websters/>Getting Websters</a></p><p class="lead font-italic mb-0">More glorious language</p><div class="font-weight-light mt-3"><p>A few years ago I read a great post about the value of a good dictionary, which I installed on my laptop and then promptly forgot about. The post is very moving, and I recommend checking it out. It was recently mentioned on the planet emacs blog circuit and so I thought I'd document how to get it up and running on my laptop. Also I don't understand what the appeal of John McPhee's writing, I've tried a few of his books but found them all so plodding.</p></div><a href=../../../articles/2020/getting_websters/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>